!function(e,t){if("function"==typeof define&&define.amd)define(["d3"],t);else if("object"==typeof module&&module.exports){var s=Object.assign({},require("d3-scale"),require("d3-selection"),require("d3-shape"));module.exports=t(s)}else e.SvgPie=t(e.d3)}(this,function(e){return function(t,s){var n={innerRadiusSize:.7,legend:!0};this.options=Object.assign(n,s);var i,a=document.querySelector(t),l=e.select(t).style("position","relative").style("display","flex").style("justify-content","center").style("align-items","center"),o=e.scaleOrdinal(e.schemeCategory10),r=e.select(t).append("svg").style("position","absolute").style("top","0").style("left","0"),p=r.append("g"),d=e.pie().value(function(e){return e.value}).sort(null);if(this.options.legend){var i=l.append("div").attr("class","tooltip").style("position","absolute").style("display","none").style("pointer-events","none");i.append("div").attr("class","tooltip-label"),i.append("div").attr("class","tooltip-value")}this.update=function(){var t=parseInt(l.style("width")),s=t>600?t/1.5:t,n=Math.min(t,s)/2,u=n*this.options.innerRadiusSize;l.style("height",s+"px"),r.attr("width",t).attr("height",s),p.attr("transform","translate("+t/2+","+s/2+")");var c=e.arc().innerRadius(u).outerRadius(n),y=p.selectAll("path").data(d(this.options.dataset)),f=y.enter().append("path").merge(y).attr("d",c).attr("fill",function(e){return o(e.data.label)});this.options.legend&&(f.on("mouseover",function(e){i.style("display","block"),i.select(".tooltip-label").text(e.data.label),i.select(".tooltip-value").text(e.value)}),a.addEventListener("mousemove",function(e){var n=e.layerY,a=e.layerX;console.log(a,n);var l=s/2>n?n+20:n-parseInt(i.style("height"))-parseInt(i.style("padding-top"))-parseInt(i.style("padding-bottom"))-20,o=t/2>a?a+20:a-parseInt(i.style("width"))-parseInt(i.style("padding-left"))-parseInt(i.style("padding-right"))-20;i.style("top",l+"px").style("left",o+"px")}),f.on("mouseout",function(){i.style("display","none")}))}.bind(this),this.update(),e.select(window).on("resize",this.update)}});