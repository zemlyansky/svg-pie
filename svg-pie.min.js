!function(t,e){if("function"==typeof define&&define.amd)define(["d3"],e);else if("object"==typeof module&&module.exports){var s=Object.assign({},require("d3-scale"),require("d3-selection"),require("d3-shape"),require("d3-color"),require("d3-interpolate"));module.exports=e(s)}else t.SvgPie=e(t.d3)}(this,function(t){return function(e,s){var o={innerRadiusSize:.7,legend:!0,showTooltip:!0,showLabels:!1,sort:!1,colors:["#004A7C","#CDFC41","#A2A2A1"]};this.options=Object.assign(o,s);var i,n,a,l,r=this,p=document.querySelector(e),d=t.select(e).style("position","relative").style("display","flex").style("justify-content","center").style("align-items","center"),u=t.select(e).append("svg").style("position","absolute").style("top","0").style("left","0"),h=u.append("g"),c=t.pie().value(function(t){return t.value}).sort(null);if(this.options.showTooltip){var f=d.append("div").attr("class","tooltip").style("position","absolute").style("display","none").style("pointer-events","none");f.append("div").attr("class","tooltip-label"),f.append("div").attr("class","tooltip-value")}this.update=function(){"number"==typeof this.options.values&&(this.options.values=[this.options.values]),"undefined"==typeof this.options.dataset&&"undefined"!=typeof this.options.values&&(this.options.dataset=[],this.options.values.forEach(function(t,e){r.options.dataset.push({value:t,label:"undefined"!=typeof r.options.labels?r.options.labels[e]:""})})),1===this.options.dataset.length&&this.options.dataset.push({value:100-this.options.dataset[0].value,label:""}),"boolean"==typeof this.options.sort&&this.options.sort&&this.options.dataset.length>1&&this.options.dataset.sort(function(t,e){return e.value-t.value});var e=h.selectAll(".segment").data(c(this.options.dataset));e.exit().remove();var s=e.enter().append("g").attr("class","segment");s.append("path"),"boolean"==typeof this.options.showLabels&&this.options.showLabels&&s.append("text").style("font-size",".8em").attr("class","chart-label");var o=s.merge(e);i=o.select("path"),"boolean"==typeof this.options.showLabels&&this.options.showLabels&&(n=o.select("text").text(function(t){return t.data.label})),l=(this.options.dataset.length-1)/(this.options.colors.length-1),a=t.scaleLinear().domain(this.options.colors.map(function(t,e){return e*l})).interpolate(t.interpolateHcl).range(this.options.colors.map(function(e){return t.rgb(e)})),this.render()}.bind(this),this.render=function(){var e=parseInt(d.style("width")),s=e>600?e/1.5:e,o=Math.min(e,s)/2,l=o*this.options.innerRadiusSize;d.style("height",s+"px"),u.attr("width",e).attr("height",s),h.attr("transform","translate("+e/2+","+s/2+")");var r=t.arc().innerRadius(l).outerRadius(o);if("boolean"==typeof this.options.showLabels&&this.options.showLabels){var c=o-25,y=t.arc().innerRadius(c).outerRadius(c);n.attr("transform",function(t){return"translate("+y.centroid(t)+")"}).attr("dy","0.35em").attr("dx",function(t){var e=y.centroid(t);return e[0]>0?(-(10*t.data.label.length)*y.centroid(t)[0]/o).toFixed(0)+"px":"0px"})}i.attr("d",r).attr("fill",function(t,e){return a(e)}),this.options.showTooltip&&(i.on("mouseover",function(t){f.style("display","block"),f.select(".tooltip-label").text(t.data.label),f.select(".tooltip-value").text(t.value)}),p.addEventListener("mousemove",function(t){var o=t.layerY,i=t.layerX,n=s/2>o?o+20:o-parseInt(f.style("height"))-parseInt(f.style("padding-top"))-parseInt(f.style("padding-bottom"))-20,a=e/2>i?i+20:i-parseInt(f.style("width"))-parseInt(f.style("padding-left"))-parseInt(f.style("padding-right"))-20;f.style("top",n+"px").style("left",a+"px")}),i.on("mouseout",function(){f.style("display","none")}))}.bind(this),this.update(),t.select(window).on("resize",this.render)}});