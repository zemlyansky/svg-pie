!function(t,e){if("function"==typeof define&&define.amd)define(["d3"],e);else if("object"==typeof module&&module.exports){var n=Object.assign({},require("d3-scale"),require("d3-selection"),require("d3-shape"));module.exports=e(n)}else t.SvgPie=e(t.d3)}(this,function(t){return function(e,n){var s={innerRadiusSize:.7,legend:!0,colors:["#004A7C","#CDFC41","#A2A2A1"]};this.options=Object.assign(s,n);var i=document.querySelector(e),o=t.select(e).style("position","relative").style("display","flex").style("justify-content","center").style("align-items","center"),l=(this.options.dataset.length-1)/(this.options.colors.length-1);console.log(this.options.colors.map(function(t,e){return e*l}));var a,r=t.scaleLinear().domain(this.options.colors.map(function(t,e){return e*l})).interpolate(t.interpolateHcl).range(this.options.colors.map(function(e){return t.rgb(e)})),p=t.select(e).append("svg").style("position","absolute").style("top","0").style("left","0"),d=p.append("g"),u=t.pie().value(function(t){return t.value}).sort(null);if(this.options.legend){var a=o.append("div").attr("class","tooltip").style("position","absolute").style("display","none").style("pointer-events","none");a.append("div").attr("class","tooltip-label"),a.append("div").attr("class","tooltip-value")}this.update=function(){var e=parseInt(o.style("width")),n=e>600?e/1.5:e,s=Math.min(e,n)/2,l=s*this.options.innerRadiusSize;o.style("height",n+"px"),p.attr("width",e).attr("height",n),d.attr("transform","translate("+e/2+","+n/2+")");var c=t.arc().innerRadius(l).outerRadius(s),y=d.selectAll("path").data(u(this.options.dataset)),h=y.enter().append("path").merge(y).attr("d",c).attr("fill",function(t,e){return r(e)});this.options.legend&&(h.on("mouseover",function(t){a.style("display","block"),a.select(".tooltip-label").text(t.data.label),a.select(".tooltip-value").text(t.value)}),i.addEventListener("mousemove",function(t){var s=t.layerY,i=t.layerX,o=n/2>s?s+20:s-parseInt(a.style("height"))-parseInt(a.style("padding-top"))-parseInt(a.style("padding-bottom"))-20,l=e/2>i?i+20:i-parseInt(a.style("width"))-parseInt(a.style("padding-left"))-parseInt(a.style("padding-right"))-20;a.style("top",o+"px").style("left",l+"px")}),h.on("mouseout",function(){a.style("display","none")}))}.bind(this),this.update(),t.select(window).on("resize",this.update)}});