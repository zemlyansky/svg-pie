function factory(t){var e={innerRadiusSize:.7,showTooltip:!0,showLabels:!1,sort:!1,colors:["#004A7C","#CDFC41","#A2A2A1"],transition:700,initialTransition:!1,percents:!1,showOtherTooltip:!1,otherSize:1};return function i(n,o){if(!(this instanceof i))return new i(n,o);this.options=Object.assign(e,o.options),this.data=o.data;var s=this,a=t.select(n),r=a.append("svg"),l=r.append("g");a.style("position","relative").style("display","flex").style("justify-content","center").style("align-items","center"),r.style("position","absolute").style("top","0").style("left","0");var p,d,u,h,c;if(this.options.showTooltip){var f=a.append("div").attr("class","tooltip").style("position","absolute").style("display","none").style("pointer-events","none");f.append("div").attr("class","tooltip-label"),f.append("div").attr("class","tooltip-value")}var y=t.pie().value(function(t){return t.value}).sort(function(t,e){return"boolean"==typeof s.options.sort&&s.options.sort?e.value-t.value>0&&"Other"!==e.label:null});this.update=function(){var e;if("string"==typeof this.data.labels?e=[this.data.labels]:Array.isArray(this.data.labels)&&(e=this.data.labels),c=[],Array.isArray(this.data.dataset)&&"object"==typeof this.data.dataset[0])this.data.dataset.forEach(function(t){c.push(Object.assign({},t))});else if("number"==typeof this.data.values)c.push({value:this.data.values,label:"string"==typeof e[0]?e[0]:""});else{if(!(Array.isArray(this.data.values)&&this.data.values.length>0))throw new Error("No data provided");this.data.values.forEach(function(t,i){c.push({value:t,label:"string"==typeof e[i]?e[i]:""})})}if("boolean"==typeof this.options.percents&&this.options.percents){var i=c.map(function(t){return t.value}).reduce(function(t,e){return t+e});100>i&&c.push({value:100-i,label:"Other"})}var n=l.selectAll(".segment").data(y(c));n.exit().remove();var o=n.enter().append("g").attr("class","segment");o.append("path"),o.append("text");var s=o.merge(n);p=s.select("path"),"boolean"==typeof this.options.showLabels&&this.options.showLabels&&(d=s.select("text").text(function(t){return t.data.label}).style("font-size",".8em").attr("class","chart-label")),h=(c.length-1)/(this.options.colors.length-1),u=t.scaleLinear().domain(this.options.colors.map(function(t,e){return e*h})).interpolate(t.interpolateHcl).range(this.options.colors.map(function(e){return t.rgb(e)})),p.attr("fill",function(t,e){return u(e)}),this.render()}.bind(this),this.render=function(){var e=parseInt(a.style("width")),i=e>600?e/1.5:e,n=Math.min(e,i)/2,o=n*this.options.innerRadiusSize;a.style("height",i+"px"),r.attr("width",e).attr("height",i),l.attr("transform","translate("+e/2+","+i/2+")");var u=t.arc().innerRadius(function(t){return"Other"===t.data.label&&o>0?o+(n-o)*(1-s.options.otherSize)/2:o}).outerRadius(function(t){return"Other"===t.data.label?n-(n-o)*(1-s.options.otherSize)/2:n});if("boolean"==typeof this.options.showLabels&&this.options.showLabels){var h=n-25,y=t.arc().innerRadius(h).outerRadius(h);d.attr("transform",function(t){return"translate("+y.centroid(t)+")"}).attr("dy","0.35em").attr("dx",function(t){var e=y.centroid(t);return e[0]>0?(-(10*t.data.label.length)*y.centroid(t)[0]/n).toFixed(0)+"px":"0px"})}"boolean"==typeof this.options.transition&&this.options.transition&&(this.options.transition=this.defaultOptions.transition),"number"==typeof this.options.transition&&this.options.transition>0?(console.log(c),p.transition().duration(this.options.transition).attrTween("d",function(e,i){"undefined"==typeof this._current&&"boolean"==typeof s.options.initialTransition&&s.options.initialTransition&&(this._current={index:i,startAngle:0},this._current.endAngle=i===c.length-1?2*Math.PI:0);var n=t.interpolate(this._current,e);return this._current=n(0),function(t){return u(n(t))}})):p.attr("d",u),"boolean"==typeof this.options.showTooltip&&this.options.showTooltip&&(p.on("mouseover",function(t){"Other"!==t.data.label&&(f.style("display","block"),f.select(".tooltip-label").text(t.data.label),f.select(".tooltip-value").text(s.options.percents?t.data.value+"%":t.data.value))}),a.node().addEventListener("mousemove",function(t){var n=t.layerY,o=t.layerX,s=i/2>n?n+20:n-parseInt(f.style("height"))-parseInt(f.style("padding-top"))-parseInt(f.style("padding-bottom"))-20,a=e/2>o?o+20:o-parseInt(f.style("width"))-parseInt(f.style("padding-left"))-parseInt(f.style("padding-right"))-20;f.style("top",s+"px").style("left",a+"px")}),p.on("mouseout",function(){f.style("display","none")}))}.bind(this),this.update(),t.select(window).on("resize."+n.replace(/[^a-z0-9_-]/gi,""),this.render)}}!function(t,e){if("function"==typeof define&&define.amd)define(["d3"],e);else if("object"==typeof module&&module.exports){var i=Object.assign({},require("d3-scale"),require("d3-selection"),require("d3-shape"),require("d3-color"),require("d3-interpolate"));module.exports=e(i)}else t.SvgPie=e(t.d3)}(this,factory);