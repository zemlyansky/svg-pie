!function(e,t){if("function"==typeof define&&define.amd)define(["d3"],t);else if("object"==typeof module&&module.exports){var n=Object.assign({},require("d3-scale"),require("d3-selection"),require("d3-shape"));module.exports=t(n)}else e.SvgPie=t(e.d3)}(this,function(e){return function(t,n){var a=e.select(t);a.style("position","relative").style("display","flex").style("justify-content","center").style("align-items","center");var s,i={innerRadiusSize:.7,legend:!0},l=Object.assign(i,n),o=e.scaleOrdinal(e.schemeCategory10),r=e.select(t).append("svg").style("position","absolute").style("top","0").style("left","0"),u=r.append("g"),d=e.pie().value(function(e){return e.value}).sort(null);if(l.legend){var s=a.append("div").attr("class","tooltip").style("position","absolute");s.append("span").attr("class","tooltip-value")}this.update=function(){var t=parseInt(a.style("width")),n=t,i=t>600?t/2:t,p=Math.min(n,i)/2,c=p*l.innerRadiusSize,f=e.arc().innerRadius(c).outerRadius(p);a.style("height",i+"px"),r.attr("width",n).attr("height",i),u.attr("transform","translate("+n/2+","+i/2+")");var y=u.selectAll("path").data(d(l.dataset)),v=y.enter().append("path").merge(y).attr("d",f).attr("fill",function(e){return o(e.data.label)});l.legend&&(v.on("mouseover",function(e){s.style("display","block").select(".tooltip-value").text(e.value)}),v.on("mousemove",function(){s.style("top",e.event.layerY+10+"px").style("left",e.event.layerX+10+"px")}),v.on("mouseout",function(){s.style("display","none")}))},this.update(),e.select(window).on("resize",this.update)}});